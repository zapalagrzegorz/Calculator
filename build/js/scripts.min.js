"use strict";var Calculator=function(){var a=document.querySelector(".screen__top"),b=document.querySelector(".screen__bottom"),c=[],d=[],e=[],f={"√":4,"^":4,"*":3,"/":3,"+":2,"-":2},g=function(){var g=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e.length=0,c.length=0,d.length=0,e=a.textContent.trim().split(/\s+/g),e.forEach(function(a,b){if(/sqrt\(\d+\)/.exec(a)){var c=/\d+/.exec(a)[0];e.splice(b,1,c,"√")}else/\^2/.exec(a)&&e.splice(b,1,"^")}),1!==e.length){for(/[+\-*\/]/.test(e.slice(-1)[0])&&e.pop(),e.forEach(function(a){if(isNaN(Number(a)))if(d.length){for(;f[a]<=f[d[0]]&&(c.push(d.shift()),0!==d.length););d.unshift(a)}else d.unshift(a);else c.push(a)},this);d.length;)c.push(d.shift());for(var h=0;1!==c.length;){var i=c[h];if(isNaN(i)){var j=0,k=Number(c[h-2]),l=Number(c[h-1]);switch(i){case"+":j=k+l;break;case"-":j=k-l;break;case"*":j=k*l;break;case"/":j=k/l;break;case"√":j=Math.sqrt(l);break;case"^":j=Math.pow(l,2)}switch(i){case"+":case"-":case"*":case"/":c.splice(h-2,3,j),h-=2;break;case"√":case"^":c.splice(h-1,2,j),h-=1}}h++}c[0]%1!=0&&(c[0]=Number(c[0].toFixed(2))),b.textContent=String(c[0]),g&&(a.textContent="0")}};return{setScreen:function(c){if("C"===c)a.textContent="0",b.textContent="0";else if(void 0!==c.target){if(c.target.classList.contains("calcPanel"))return;if("C"===c.target.textContent)return a.textContent="0",void(b.textContent="0")}var d=a.textContent,e=void 0!==c.target?c.target.textContent:c,f=/\d+$/.test(d),h=/sqrt\(\d+\)\s*$/.test(d),i=/(\d+\s\^2)$/.test(d);if(/[0-9]/.test(e))"0"===a.textContent.charAt(0)&&1===d.length||i?(a.textContent=e,b.textContent=e):h?(a.textContent=d.replace(/sqrt\(\d+\)\s*$/,e),b.textContent=e):f?Number.isFinite(Number(b.textContent))?(a.textContent+=e,b.textContent+=e):(b.textContent="Error",a.textContent="0"):(a.textContent+=" "+e,b.textContent=e);else{var j=d.charAt(d.length-1);switch(e){case"+":case"-":case"*":case"/":f||h||i?(a.textContent+=" "+e,b.textContent=e):(a.textContent=d.replace(/.?$/,e),b.textContent=e);break;case"^":if(h||/(sqrt\(\d+\)\s*\W)$/.test(d))return;f?(a.textContent+=" "+e+"2",b.textContent=e+"2"):(a.textContent=d.replace(j,e+"2"),b.textContent=e+"2");break;case"√":if(h)return;if(i||/(\d+\s\^2\s\W)$/.test(d))return;a.textContent=f?d.replace(/(\d+)$/,"sqrt($1) "):d.replace(/(\d+)\W+$/,"sqrt($1) ")}}g()},parseExpression:g}}();document.addEventListener("DOMContentLoaded",function(){var a=document.querySelector(".calculator"),b=document.querySelector(".calcPanel"),c=document.querySelector(".calcBtnEq"),d=document.querySelector(".changeViewBtn");b.addEventListener("click",Calculator.setScreen,!1),c.addEventListener("click",Calculator.parseExpression.bind(Calculator,!0)),document.onkeydown=function(a){switch(a.key){case"0":Calculator.setScreen("0");break;case"1":Calculator.setScreen("1");break;case"2":Calculator.setScreen("2");break;case"3":Calculator.setScreen("3");break;case"4":Calculator.setScreen("4");break;case"5":Calculator.setScreen("5");break;case"6":Calculator.setScreen("6");break;case"7":Calculator.setScreen("7");break;case"8":Calculator.setScreen("8");break;case"9":Calculator.setScreen("9");break;case"+":Calculator.setScreen("+");break;case"-":Calculator.setScreen("-");break;case"*":Calculator.setScreen("*");break;case"/":Calculator.setScreen("/");break;case"^":Calculator.setScreen("^");break;case"c":Calculator.setScreen("C");break;case"Enter":Calculator.parseExpression()}event.preventDefault()},d.addEventListener("click",function(){window.innerWidth>600&&(a.classList.toggle("calculator--traditional"),a.classList.toggle("calculator--original"))})});
//# sourceMappingURL=scripts.min.js.map